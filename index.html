<head>
  <style>
    .button-wrapper {
      display: block;
      text-align: center;
    }

    .button {
      border: none;
      border-radius: 1em;
      box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);
      display: inline-block;
      font-size: 1em;
      padding: 1em 2em;
      width: auto;
    }

    .cta-button {
      background-color: #1d3557;
      color: #f1faee !important;
    }

    .cta-button:hover {
      background-color: #457b9d;
    }
    table,
    tr,
    td {
      padding: 0;
      margin: 0;
      border-collapse: collapse;
      border-spacing: 0;
    }
    #sheet {
      /* margin: 10px;
      font-size: 14px;
      background-color: #fff; */
    }

    #sheet td {
      border-top: 1px solid #efefef;
      border-left: 1px solid #efefef;
      padding: 4px;
      color: #333;
      vertical-align: top;
    }
    #sheet tr {
      border-bottom: 1px solid #efefef;
      border-right: 1px solid #efefef;
    }
    #sheet .tr_0 td {
      font-weight: bold;
    }
    #sheet .td_description {
      width: 400px;
    }

    .place_pill {
      padding:20px;
      background:#fff;
      border-radius:20px;
      margin-top:20px;
      /* box-shadow: 1px 1px 1px #eee; */

    }

    .div_content_business_name {
      font-size:22px;
      font-weight:bold;
    }

    .div_content_location {
      color:#666;
    }

    .venmo_pill {
      margin:20px 0px;
    }

    .venmo_pill a {
       text-decoration:none;
       color:#6696CC;
       border:1px solid #6696CC;
       padding:15px;
       border-radius:20px;
       display:flex;
       align-items: center;
       background:white;
    }

    .venmo_pill img {
      margin-right:10px;
    }

  </style>

  <script>
    function showTellMeMore() {
      var x = document.getElementById('tell_me_more');
      var y = document.getElementById('tell_me_more_header');
      if (x.style.display === 'none') {
        x.style.display = 'block';
        y.innerHTML = '<h3>Tell Me More</h3>';
      } else {
        x.style.display = 'none';
      }
    }
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css" />

  <style type="text/css">
    ol {
      list-style: none;
      padding-left: 2rem;
      counter-reset: circle-counter;
    }

    ol li {
      counter-increment: circle-counter;
    }
    ol li:before {
      border: 1px solid black;
      content: counter(circle-counter);
      width: 1.5rem;
      height: 1.5rem;
      position: absolute;
      border-radius: 100%;
      text-align: center;
      line-height: 1.5rem;
      margin-left: -2rem;
    }
  </style>
</head>

<body class="sans-serif" style="background-color:#A8DADC">
  <div class="mw8 ph4 center">
    <div style="border-bottom:1px solid rgb(237, 237, 245); padding:10px; padding-bottom:26px;">
      <div style="font-size:30px; margin-top:20px; font-weight:bold">BAILOUT.NYC ❤️</div>
    </div>

    <div class="fl w-100 pa2"">
      <h1 style="font-size:36px;">
        Help Affected Service Workers
      </h1>
      <h1 class="f4 measure">
        Venmo a business below to help provide financial relief for their service workers.
      </h1>
    </div>

    <div class="button-wrapper" style="margin-bottom:10px; text-align:left; padding-left:10px; ">
      <a class="button cta-button" style="text-decoration:none; padding-left:58px; padding-right:58px;" href="#business_list"
        >Venmo a Business Now</a
      >
    </div>

    <div class="fl w-100 w-50-l pa2">
      <div class="bg-white br1 pa3" style="border-radius:20px;">
          <h3 class="f4 measure-narrow mt0">
            Service Workers Need Help
          </h3>
          Many businesses in NYC are closed as a result of Covid-19, resulting in a lot of staff members who all of a sudden without a reliable income. We've compiled a list of vetted Venmo accounts if you'd like to contribute something to them. The businesses will distribute the funds to their staff members.

          <br /> <br />
          If you're not sure who to support, you can Venmo our general fund, <a href="https://venmo.com/bailoutnyc">@bailoutnyc</a>, and we'll evenly divide it among the businesses (we won't take a cut).<br /> <br />


        <div id="tell_me_more_header">
          <a href="" onClick="showTellMeMore(); return false;">Tell me more...</a>
        </div>
        <div id="tell_me_more" style="display:none">
          <p>
            In order to slow the spread of the coronavirus, the local government is
            <a
              target="_blank"
              href="https://www1.nyc.gov/site/doh/health/health-topics/coronavirus.page">advising</a>
            restaurants, bars, cafes, nightclubs, movie theaters, small theater houses, and concert
            venues to close. Elsewhere closures are even more comprehensive.
          </p>
          <p>
            While this is prudent from a public health perspective, these closures will have a real
            and immediate economic impact to service workers across industries. It could mean missed
            rent or inability to pay for basic needs for many.
          </p>

          <p>The city recognizes the economic stress this will put on service workers, and, in order to incentivize businesses to keep employees on payroll, the administration has announced that "businesses with fewer than 100 employees could be eligible for an interest-free loan up to $75,000 as long as they can document a 25% loss in customer receipts because of the coronavirus."</p>

        <p>While an interest free loan is a good place to start, we believe we can do more to help those affected, and are raising funds to be distributed to all the businesses affected by this public health crisis.</p>

        <p>The economic impacts of the coronavirus will be comparable to a very severe recession -- some economists estimate direct output loss of 30% for a fiscal quarter, which would equate to an annual GDP loss of 7.5%.</p>

        <p>Hopefully, we can anticipate the second order consequences of the coronavirus and proactively work to mitigate them more swiftly than we have addressed the public health concerns.</p>

        <p>We cannot all be working alongside all of the heroic healthcare workers testing and treating coronavirus patients, but our goal with this project is to enable every citizen to do something today to mitigate the economic impact suffered by a huge number of service workers.</p>
        </div>

        <br />
      </div>
    </div>

    <div class="fl w-100 w-50-l pa2">
      <div class="bg-white br1 pa3" style="border-radius:20px;">
        <h3 class="f4 measure-narrow mt0">
          Add a Business
        </h3>


              Tell your favorite local businesses to register on bailout.nyc so we can all support their staff.

<br /><br />


            If you own or operate a business affected by Covid-19, <a
              target="_blank"
              href="https://docs.google.com/forms/d/e/1FAIpQLSeVfXDv07KhzMyOWfgbrQvZQOzqmABMIsKXZm7BK9FeKx1iwA/viewform"
              >fill out this form</a
            >
            to register your business for listing + relief.
            <strong>Verify that it's you by DMing your Venmo username to @bailoutnyc on Instagram or Twitter from your business account, or by posting publicly about bailout.nyc.</strong>

<br /> <br />
            <div><i>Feel free to use this text if you post publicly: "Help support our staff by contributing to them on bailout.nyc. We've set up a Venmo
              account @username where you can send funds, which will be distributed between all of
              our staff members." (Swap out @username for your
            business's Venmo username).</i></div>


      </div>
    </div>

    <a name="business_list"></a>
    <div class="fl w-100 pt10 pa2"><div style="margin-top:40px; font-weight:bold; font-size:30px;">Businesses</div>
      <div id="sheet" ></div>
    </div>
  </div>

  <script
    type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"
  ></script>
  <script>
    const parseSheetResult = result => {
      let colMap = {
        '1': 'business_name',
        '2': 'venmo_handle',
        '3': 'location',
        '4': 'description',
      };
      var rows = [];
      result.feed.entry.map(e => {
        let rowNum = parseInt(e['gs$cell'].row, 10);
        while (rows.length < rowNum) {
          rows.push({});
        }
        let rowIndex = rowNum - 1;
        let colNum = e['gs$cell'].col;
        let key = colMap[colNum];
        let cellValue = e['gs$cell']['$t'];
        rows[rowIndex][key] = cellValue;
      });
      return rows;
    };

    const drawTable = sheet => {
      let t = document.getElementById('sheet');
      SHEET.map((row, i) => {
        let tr = document.createElement('div');
        tr.className = `place_pill`;
        ['business_name', 'venmo_handle', 'location', 'description'].map(k => {
          let td = document.createElement('div');
          td.className = `div_content_${k}`;


//https://venmo.com/iqram?txn=pay&amount=0.01&note=Hii,%20I%20worked%20with%20John%20on%20Venmo,%20and%20he%20wants%20to%20hear%20your%20voice.%20Listen%20to%20this%20Ense%20he%20made:%20https://ense.nyc/ense/154602/violetredyellow

          if (k == 'venmo_handle') {
              let venmo_link = 'https://venmo.com/'+row[k]+'?txn=pay&note=helping%20this%20local%20business%20-%20if%20you%20can%20pls%20support%20local%20businesses%20on%20www.bailout.nyc';
              td.innerHTML = "<div class='venmo_pill'><a href='"+venmo_link+"'><img src='https://c7.uihere.com/files/461/602/357/venmo-money-payment-square-cash-paypal.jpg' width='25px;'/>Venmo "+row[k]+"</a></div>";
          } else {
              td.textContent = row[k];
          }

          tr.appendChild(td);
        });
        if (i != 0) {
            t.appendChild(tr);
        }
      });
    };
    var SHEET = [];
    var SHEET_JSON = null;
    var json_url =
      'https://spreadsheets.google.com/feeds/cells/1BNUEa4LPVRQ4aY6xw4W5rhh7V18Xy5YnZ5ZWXS7zkN4/1/public/full?alt=json';
    $.ajax(json_url).done(function(result) {
      SHEET_JSON = result;
      console.log(result);
      SHEET = parseSheetResult(result);
      drawTable(SHEET);
    });
  </script>
</body>
